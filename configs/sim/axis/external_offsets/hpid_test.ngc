(info: Test pattern for torch tuning)
;Note: spindle hal pins used to control torch
o<hpid_test> sub
        #<rpt_ct> =  #1 (=5)
#<torch_setpoint> =  #2 (=80)
 #<torch_cut_hgt> =  #3 (=0.080)
    #<pierce_hgt> =  #4 (=0.080)
    #<pierce_dly> =  #5 (=0)

        #<xstart> =  #6 (=0)
        #<ystart> =  #7 (=0)
        #<width>  =  #8 (=0.5)
        #<height> =  #9 (=3)
    #<separation> = #10 (=0.5)
      #<safe_hgt> = #11 (=0.100)

     #<feed_rate> = #12 (=100)
    #<pause_secs> = #13 (=1)

G20        ;Units: Inches
G40        ;Cancel Cutter Comp
G90        ;Absolute Mode
G64 P0.005 ;Continuous mode + path tolerance

G0 X#<xstart> Y#<ystart> Z#<safe_hgt>
#<ct> = 0
o<rpt> repeat [#<rpt_ct>]
            #<x1> = [#<xstart> + #<ct> * #<separation> + #<ct> * #<width>]
            #<x2> = [#<x1> + #<width>]
            #<y1> = #<ystart>
            #<y2> = [#<ystart> + #<height>]
            M111 ;clear notifications
            G0 X#<x1> Y#<y1> Z#<safe_hgt>
            M68 E0 Q#<torch_setpoint>
            F#<feed_rate>
            ;touchoff: probe, set Z0, start torch
o<touchoff> call [#<pierce_hgt>][#<pierce_dly>][#<torch_cut_hgt>]
            G1 X #<x1> Y #<y1>
            G1 X #<x2> Y #<y1>
            G1 X #<x2> Y #<y2>
            G1 X #<x1> Y #<y2>
            G1 X #<x1> Y #<y1>
            M68 E0 Q0       ;set torch-volts 0
            M5              ;torch off
            G92.1           ;Cancel offsets
            G0 Z#<safe_hgt>
            (debug, finish #<ct>)
            G4 P#<pause_secs>
            #<ct> = [#<ct> + 1]
o<rpt> endrepeat

o<hpid_test> endsub
